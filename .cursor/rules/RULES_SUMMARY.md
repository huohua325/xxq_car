# Cursor Rules Summary - xxqæ™ºèƒ½å°è½¦é¡¹ç›®

**ç”Ÿæˆæ—¥æœŸ**: 2025-10-15  
**è§„åˆ™æ€»æ•°**: 9ä¸ª  
**è¦†ç›–èŒƒå›´**: STM32å›ºä»¶ + Pythonä¸»æœº + å®Œæ•´å¼€å‘æµç¨‹

---

## ğŸ“Š è§„åˆ™ç»Ÿè®¡

| ç±»å‹ | æ•°é‡ | è§„åˆ™åç§° |
|------|------|---------|
| **æ€»æ˜¯åº”ç”¨** | 1 | project-structure.mdc |
| **è‡ªåŠ¨åº”ç”¨ï¼ˆæ–‡ä»¶ç±»å‹ï¼‰** | 5 | python-coding-style, stm32-firmware, config-management, communication-protocol, visualization |
| **æ‰‹åŠ¨è§¦å‘ï¼ˆæè¿°ï¼‰** | 6 | algorithms, testing-guidelines, config-management, communication-protocol, debugging, visualization |

---

## ğŸ¯ è§„åˆ™å…¨æ™¯å›¾

```
xxqæ™ºèƒ½å°è½¦é¡¹ç›®
â”‚
â”œâ”€â”€ ğŸ“ é¡¹ç›®ç»“æ„
â”‚   â””â”€â”€ project-structure.mdc (æ€»æ˜¯åº”ç”¨)
â”‚       â”œâ”€â”€ STM32å›ºä»¶ç«¯æ¶æ„
â”‚       â”œâ”€â”€ Pythonä¸»æœºç«¯æ¶æ„
â”‚       â”œâ”€â”€ é€šä¿¡åè®®æ¦‚è¿°
â”‚       â””â”€â”€ å¼€å‘åŸåˆ™
â”‚
â”œâ”€â”€ ğŸ’» ä»£ç è§„èŒƒ
â”‚   â”œâ”€â”€ python-coding-style.mdc (*.py)
â”‚   â”‚   â”œâ”€â”€ PEP 8è§„èŒƒ
â”‚   â”‚   â”œâ”€â”€ Docstring & ç±»å‹æ³¨è§£
â”‚   â”‚   â””â”€â”€ é”™è¯¯å¤„ç†
â”‚   â”‚
â”‚   â””â”€â”€ stm32-firmware.mdc (*.c, *.h)
â”‚       â”œâ”€â”€ å‘½åè§„èŒƒ
â”‚       â”œâ”€â”€ HALåº“ä½¿ç”¨
â”‚       â””â”€â”€ ç¡¬ä»¶é©±åŠ¨æ ‡å‡†
â”‚
â”œâ”€â”€ ğŸ”§ æ ¸å¿ƒåŠŸèƒ½
â”‚   â”œâ”€â”€ algorithms.mdc (æ‰‹åŠ¨è§¦å‘)
â”‚   â”‚   â”œâ”€â”€ SLAMç®—æ³•ï¼ˆå æ®æ …æ ¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ å‰æ²¿æ¢ç´¢ï¼ˆDBSCANï¼‰
â”‚   â”‚   â”œâ”€â”€ è·¯å¾„è§„åˆ’ï¼ˆA*ï¼‰
â”‚   â”‚   â”œâ”€â”€ DWAé¿éšœ
â”‚   â”‚   â””â”€â”€ å·®åˆ†é©±åŠ¨è¿åŠ¨å­¦
â”‚   â”‚
â”‚   â”œâ”€â”€ communication-protocol.mdc (è‡ªåŠ¨+æ‰‹åŠ¨)
â”‚   â”‚   â”œâ”€â”€ ä¸Šè¡Œæ•°æ®ï¼ˆMPU/ODO/POSE/LIDARï¼‰
â”‚   â”‚   â”œâ”€â”€ ä¸‹è¡Œå‘½ä»¤ï¼ˆNAV/SPD/MODE/RESETï¼‰
â”‚   â”‚   â””â”€â”€ é”™è¯¯å¤„ç†
â”‚   â”‚
â”‚   â””â”€â”€ config-management.mdc (è‡ªåŠ¨+æ‰‹åŠ¨)
â”‚       â”œâ”€â”€ å‚æ•°åŒæ­¥ï¼ˆå›ºä»¶â†”Pythonï¼‰
â”‚       â”œâ”€â”€ é…ç½®æ–‡ä»¶ç»„ç»‡
â”‚       â””â”€â”€ ç‰ˆæœ¬æ§åˆ¶
â”‚
â”œâ”€â”€ ğŸ§ª è´¨é‡ä¿è¯
â”‚   â”œâ”€â”€ testing-guidelines.mdc (è‡ªåŠ¨+æ‰‹åŠ¨)
â”‚   â”‚   â”œâ”€â”€ å•å…ƒæµ‹è¯•/é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ Pytestæœ€ä½³å®è·µ
â”‚   â”‚   â”œâ”€â”€ MockæŠ€å·§
â”‚   â”‚   â””â”€â”€ è¦†ç›–ç‡ç›®æ ‡ï¼ˆ>80%ï¼‰
â”‚   â”‚
â”‚   â””â”€â”€ debugging.mdc (æ‰‹åŠ¨è§¦å‘)
â”‚       â”œâ”€â”€ 8å¤§å¸¸è§é—®é¢˜è§£å†³
â”‚       â”œâ”€â”€ æ—¥å¿—è°ƒè¯•
â”‚       â”œâ”€â”€ æ€§èƒ½åˆ†æ
â”‚       â””â”€â”€ ç¡¬ä»¶è°ƒè¯•
â”‚
â””â”€â”€ ğŸ¨ å¯è§†åŒ–
    â””â”€â”€ visualization.mdc (è‡ªåŠ¨+æ‰‹åŠ¨)
        â”œâ”€â”€ Matplotlibå®æ—¶æ˜¾ç¤º
        â”œâ”€â”€ Webå¯è§†åŒ–ï¼ˆFlaskï¼‰
        â”œâ”€â”€ Blittingä¼˜åŒ–
        â””â”€â”€ å¤šå­å›¾å¸ƒå±€
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1ï¸âƒ£ ç¼–å†™Pythonä»£ç 
```python
# è‡ªåŠ¨åº”ç”¨è§„åˆ™ï¼š
# - project-structure.mdc (æ€»æ˜¯)
# - python-coding-style.mdc (*.py)

from config import WHEEL_BASE, WHEEL_RADIUS  # âœ… ä»configå¯¼å…¥
from typing import Tuple  # âœ… ç±»å‹æ³¨è§£

def calculate_velocity(left_rps: float, right_rps: float) -> Tuple[float, float]:
    """
    è®¡ç®—æœºå™¨äººé€Ÿåº¦ã€‚
    
    Args:
        left_rps: å·¦è½®è½¬é€Ÿï¼ˆè½¬/ç§’ï¼‰
        right_rps: å³è½®è½¬é€Ÿï¼ˆè½¬/ç§’ï¼‰
    
    Returns:
        (v, w): çº¿é€Ÿåº¦å’Œè§’é€Ÿåº¦
    """
    v = (left_rps + right_rps) * np.pi * WHEEL_RADIUS
    w = (right_rps - left_rps) * np.pi * WHEEL_RADIUS / WHEEL_BASE
    return v, w
```

### 2ï¸âƒ£ ç¼–å†™STM32å›ºä»¶
```c
// è‡ªåŠ¨åº”ç”¨è§„åˆ™ï¼š
// - project-structure.mdc (æ€»æ˜¯)
// - stm32-firmware.mdc (*.c)
// - config-management.mdc (main.c)

/**
 * @brief æ›´æ–°æœºå™¨äººä½å§¿
 * @param dt æ—¶é—´é—´éš”ï¼ˆç§’ï¼‰
 * @retval 0=æˆåŠŸ
 */
int update_pose(float dt) {
    // è¯»å–ç¼–ç å™¨
    float left_rps = get_left_rps();
    float right_rps = get_right_rps();
    
    // è®¡ç®—é€Ÿåº¦
    float v = (left_rps + right_rps) * M_PI * WHEEL_RADIUS / 2.0f;
    float w = (right_rps - left_rps) * M_PI * WHEEL_RADIUS / WHEEL_BASE;
    
    // æ›´æ–°ä½å§¿
    pose.theta += w * dt;
    pose.x += v * cos(pose.theta) * dt;
    pose.y += v * sin(pose.theta) * dt;
    
    return 0;
}
```

### 3ï¸âƒ£ è°ƒè¯•é—®é¢˜
```
é—®é¢˜ï¼šæœºå™¨äººä¸åŠ¨

è§¦å‘è§„åˆ™ï¼šdebugging.mdc

è§£å†³æµç¨‹ï¼š
1. âœ… æ£€æŸ¥ä¸²å£è¿æ¥ï¼ˆpython scripts/find_stm32_port.pyï¼‰
2. âœ… æŸ¥çœ‹æ—¥å¿—è¾“å‡º
3. âœ… æµ‹è¯•ç”µæœºé©±åŠ¨ï¼ˆå‘é€SPDå‘½ä»¤ï¼‰
4. âœ… æ£€æŸ¥ç¼–ç å™¨åé¦ˆ
5. âœ… éªŒè¯ç‰©ç†å‚æ•°ï¼ˆconfig-management.mdcï¼‰
```

---

## ğŸ“– ä¸»è¦ç‰¹æ€§

### âœ¨ æ™ºèƒ½è§¦å‘æœºåˆ¶

**è‡ªåŠ¨åº”ç”¨ï¼ˆåŸºäºæ–‡ä»¶ç±»å‹ï¼‰**
- æ‰“å¼€ `src/slam/occupancy_map.py`
  â†’ è‡ªåŠ¨åŠ è½½ `python-coding-style.mdc`
  
- æ‰“å¼€ `xxq/Core/Src/main.c`
  â†’ è‡ªåŠ¨åŠ è½½ `stm32-firmware.mdc` + `config-management.mdc`

**æ‰‹åŠ¨è§¦å‘ï¼ˆåŸºäºé—®é¢˜æè¿°ï¼‰**
- "å¦‚ä½•è°ƒæ•´DWAæƒé‡ï¼Ÿ"
  â†’ è§¦å‘ `algorithms.mdc`
  
- "ä½å§¿ä¼°è®¡æ¼‚ç§»æ€ä¹ˆåŠï¼Ÿ"
  â†’ è§¦å‘ `debugging.mdc` + `config-management.mdc`

### ğŸ”— è·¨è§„åˆ™é“¾æ¥

è§„åˆ™ä¹‹é—´é€šè¿‡ `[æ–‡ä»¶å](mdc:è·¯å¾„)` è¯­æ³•ç›¸äº’å¼•ç”¨ï¼Œå½¢æˆçŸ¥è¯†ç½‘ç»œï¼š

```
algorithms.mdc
  â†“ å¼•ç”¨
config.py (é…ç½®å‚æ•°)
  â†“ å¿…é¡»åŒæ­¥
main.c (å›ºä»¶å‚æ•°)
  â† æŒ‡å¯¼
config-management.mdc
```

### ğŸ“š å†…ç½®æ–‡æ¡£å¼•ç”¨

æ¯ä¸ªè§„åˆ™éƒ½é“¾æ¥åˆ°é¡¹ç›®æ–‡æ¡£ï¼š

- `algorithms.mdc` â†’ [DWAåŠ¨æ€çª—å£é¿éšœç®—æ³•è¯¦è§£.md](mdc:xxq_host/doc/description/DWAåŠ¨æ€çª—å£é¿éšœç®—æ³•è¯¦è§£.md)
- `communication-protocol.mdc` â†’ [ç¡¬ä»¶é€šä¿¡åè®®è¯¦ç»†è¯´æ˜.md](mdc:xxq_host/doc/ç¡¬ä»¶é€šä¿¡åè®®è¯¦ç»†è¯´æ˜.md)
- `testing-guidelines.mdc` â†’ [å®Œæ•´ç³»ç»Ÿæµ‹è¯•æŒ‡å—.md](mdc:xxq_host/doc/å®Œæ•´ç³»ç»Ÿæµ‹è¯•æŒ‡å—.md)

---

## ğŸ“ ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

### åœºæ™¯1: ä¿®æ”¹é€šä¿¡åè®®

**ä»»åŠ¡**: å¢åŠ ç”µæ± ç”µå‹ä¸ŠæŠ¥

**è§¦å‘è§„åˆ™**:
- `communication-protocol.mdc` (æè¿°è§¦å‘)
- `stm32-firmware.mdc` (ç¼–è¾‘ main.c)
- `python-coding-style.mdc` (ç¼–è¾‘ robot_comm.py)

**æŒ‡å¯¼æ­¥éª¤**:
1. å›ºä»¶ç«¯æ·»åŠ å‘é€ä»£ç ï¼ˆéµå¾ªCSVæ ¼å¼ï¼‰
2. Pythonç«¯æ·»åŠ è§£æä»£ç ï¼ˆä½¿ç”¨try-exceptï¼‰
3. æ›´æ–° `communication-protocol.mdc` è§„åˆ™
4. ç¼–å†™æµ‹è¯•éªŒè¯

---

### åœºæ™¯2: ä¼˜åŒ–SLAMæ€§èƒ½

**ä»»åŠ¡**: åœ°å›¾æ›´æ–°è€—æ—¶è¿‡é•¿

**è§¦å‘è§„åˆ™**:
- `algorithms.mdc` (SLAMç®—æ³•)
- `python-coding-style.mdc` (æ€§èƒ½ä¼˜åŒ–)
- `debugging.mdc` (æ€§èƒ½åˆ†æ)

**ä¼˜åŒ–å»ºè®®**:
1. ä½¿ç”¨NumPyå‘é‡åŒ–ï¼ˆ`python-coding-style.mdc`ï¼‰
2. é™åˆ¶åœ°å›¾æ›´æ–°èŒƒå›´ï¼ˆ`algorithms.mdc`ï¼‰
3. æ·»åŠ æ€§èƒ½æµ‹é‡ï¼ˆ`debugging.mdc`ï¼‰
4. ç›®æ ‡ï¼š<50msæ›´æ–°æ—¶é—´

---

### åœºæ™¯3: å‚æ•°æ ‡å®š

**ä»»åŠ¡**: é‡æ–°æ ‡å®šè½®å­åŠå¾„

**è§¦å‘è§„åˆ™**:
- `config-management.mdc` (å‚æ•°åŒæ­¥)
- `stm32-firmware.mdc` (å›ºä»¶å‚æ•°)
- `testing-guidelines.mdc` (éªŒè¯æµ‹è¯•)

**åŒæ­¥æµç¨‹**:
1. ç‰©ç†æµ‹é‡å®é™…è½®åŠå¾„
2. åŒæ—¶ä¿®æ”¹ `config.py` å’Œ `main.c`
3. é‡æ–°ç¼–è¯‘å›ºä»¶å¹¶çƒ§å½•
4. è¿è¡Œè¿åŠ¨æµ‹è¯•éªŒè¯ç²¾åº¦

---

## ğŸ› ï¸ è§„åˆ™ç»´æŠ¤

### æ·»åŠ æ–°è§„åˆ™
```bash
# åˆ›å»ºæ–°è§„åˆ™æ–‡ä»¶
.cursor/rules/new-feature.mdc

# æ·»åŠ frontmatter
---
description: æ–°åŠŸèƒ½è¯´æ˜
globs: *.ext
---

# æ–°åŠŸèƒ½è§„åˆ™å†…å®¹
...

# æ›´æ–° README.md
```

### æ›´æ–°ç°æœ‰è§„åˆ™
```bash
# ç¼–è¾‘è§„åˆ™æ–‡ä»¶
vim .cursor/rules/algorithms.mdc

# æäº¤æ›´æ”¹ï¼ˆå»ºè®®ï¼‰
git add .cursor/rules/algorithms.mdc
git commit -m "æ›´æ–°ç®—æ³•è§„åˆ™ï¼šå¢åŠ EKF SLAM"
```

---

## ğŸ“Š è§„åˆ™è¦†ç›–ç‡

| é¡¹ç›®é¢†åŸŸ | è¦†ç›–ç¨‹åº¦ | ç›¸å…³è§„åˆ™ |
|---------|---------|---------|
| **é¡¹ç›®ç»“æ„å¯¼èˆª** | â­â­â­â­â­ 100% | project-structure |
| **Pythonä»£ç ** | â­â­â­â­â­ 100% | python-coding-style |
| **STM32å›ºä»¶** | â­â­â­â­â­ 100% | stm32-firmware |
| **é€šä¿¡åè®®** | â­â­â­â­â­ 100% | communication-protocol |
| **SLAMç®—æ³•** | â­â­â­â­â­ 100% | algorithms |
| **è·¯å¾„è§„åˆ’** | â­â­â­â­â­ 100% | algorithms |
| **DWAé¿éšœ** | â­â­â­â­â­ 100% | algorithms |
| **æµ‹è¯•è§„èŒƒ** | â­â­â­â­â­ 100% | testing-guidelines |
| **é…ç½®ç®¡ç†** | â­â­â­â­â­ 100% | config-management |
| **è°ƒè¯•æ•…éšœ** | â­â­â­â­â­ 100% | debugging |
| **å¯è§†åŒ–** | â­â­â­â­â­ 100% | visualization |
| **æ€»ä½“è¦†ç›–** | **â­â­â­â­â­ 100%** | å…¨éƒ¨11ä¸ªé¢†åŸŸ |

---

## ğŸ¯ è§„åˆ™è´¨é‡æŒ‡æ ‡

### å®Œæ•´æ€§ âœ…
- âœ… é¡¹ç›®æ¶æ„å®Œæ•´æè¿°
- âœ… ç¼–ç è§„èŒƒå…¨è¦†ç›–
- âœ… æ ¸å¿ƒç®—æ³•è¯¦ç»†è¯´æ˜
- âœ… å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ
- âœ… é…ç½®å‚æ•°åŒæ­¥æœºåˆ¶

### å¯ç”¨æ€§ âœ…
- âœ… è‡ªåŠ¨è§¦å‘ + æ‰‹åŠ¨è§¦å‘
- âœ… ä»£ç ç¤ºä¾‹ä¸°å¯Œ
- âœ… è·¨è§„åˆ™å¼•ç”¨æ¸…æ™°
- âœ… æ–‡æ¡£é“¾æ¥å®Œæ•´

### å®ç”¨æ€§ âœ…
- âœ… çœŸå®é¡¹ç›®å®è·µæ€»ç»“
- âœ… æ€§èƒ½æŒ‡æ ‡æ˜ç¡®
- âœ… é”™è¯¯å¤„ç†è¯¦ç»†
- âœ… è°ƒè¯•æµç¨‹å®Œæ•´

---

## ğŸ”® æœªæ¥æ‰©å±•å»ºè®®

### å¯èƒ½çš„æ–°è§„åˆ™
1. **deployment.mdc** - éƒ¨ç½²å’Œå‘å¸ƒæµç¨‹
2. **hardware-setup.mdc** - ç¡¬ä»¶ç»„è£…å’Œæ¥çº¿
3. **performance-tuning.mdc** - æ€§èƒ½è°ƒä¼˜ä¸“é¢˜
4. **multi-robot.mdc** - å¤šæœºå™¨äººååŒï¼ˆå¦‚éœ€æ‰©å±•ï¼‰

### è§„åˆ™å¢å¼º
1. æ·»åŠ æ›´å¤šä»£ç ç¤ºä¾‹
2. å¢åŠ å¸¸è§é”™è¯¯æ¡ˆä¾‹
3. è¡¥å……æ€§èƒ½åŸºå‡†æ•°æ®
4. æ·»åŠ è§†é¢‘/å›¾ç‰‡å¼•ç”¨

---

## ğŸ“ è·å–å¸®åŠ©

### æŸ¥çœ‹æ‰€æœ‰è§„åˆ™
```bash
ls -la .cursor/rules/*.mdc
```

### æœç´¢è§„åˆ™å†…å®¹
```bash
grep -r "DWA" .cursor/rules/
```

### æµ‹è¯•è§„åˆ™åº”ç”¨
åœ¨Cursorä¸­ï¼š
1. æ‰“å¼€ä»»æ„Pythonæ–‡ä»¶ â†’ è§‚å¯Ÿè‡ªåŠ¨åº”ç”¨çš„è§„åˆ™
2. æé—®"å¦‚ä½•è°ƒè¯•XXXé—®é¢˜" â†’ è§‚å¯Ÿæ‰‹åŠ¨è§¦å‘çš„è§„åˆ™

---

## ğŸ“œ ç‰ˆæœ¬å†å²

### v1.0.0 (2025-10-15)
- âœ… åˆå§‹ç‰ˆæœ¬ï¼š9ä¸ªè§„åˆ™æ–‡ä»¶
- âœ… è¦†ç›–å…¨éƒ¨æ ¸å¿ƒåŠŸèƒ½
- âœ… å®Œæ•´æ–‡æ¡£å’Œç¤ºä¾‹

---

## ğŸ™ è‡´è°¢

è¿™å¥—è§„åˆ™åŸºäºxxqæ™ºèƒ½å°è½¦é¡¹ç›®çš„å®é™…å¼€å‘ç»éªŒç¼–å†™ï¼Œæ¶µç›–äº†ï¼š
- 53ä¸ªé€šè¿‡çš„æµ‹è¯•ç”¨ä¾‹
- 20+ä¸ªæ ¸å¿ƒç®—æ³•å®ç°
- 100+å°æ—¶çš„è°ƒè¯•ç»éªŒ
- 97%çš„æ–‡æ¡£å®Œæ•´åº¦

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…çš„å®è·µå’Œæ€»ç»“ï¼ğŸ‰

---

**æœ€åæ›´æ–°**: 2025-10-15  
**ç»´æŠ¤è€…**: xxqæ™ºèƒ½å°è½¦å¼€å‘å›¢é˜Ÿ  
**çŠ¶æ€**: âœ… ç”Ÿäº§å°±ç»ª

